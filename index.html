<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Roblox: Builder Icon Browser</title>
		<link rel="icon" type="image/x-icon" href="/favicon.ico">
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			body {
				background-color: rgb(45, 45, 45);
				font-family: monospace;
				color: white;
				
			}

			#loading-screen {
				position: fixed;
				display: flex;
				justify-content: center;
				align-items: center;
				width: 100%;
				height: 100%;
				flex-direction: column;
				z-index: 2;
			}
			
			#loading-spinner {
				border: 20px solid rgb(75, 75, 75);
				border-top: 20px solid #3498db;
				border-radius: 50%;
				width: 120px;
				aspect-ratio: 1/1;
				animation: loading-spin 1s linear infinite;
			}

			#loading-text {
				margin-top: 25px;
				font-size: 20px;
			}
			
			@keyframes loading-spin {
				0% { transform: rotate(0deg); }
				100% { transform: rotate(360deg); }
			}

			#main-content {
				position: fixed;
				width: 100%;
				height: 100%;
				z-index: 2;
				padding: 15px;
				overflow: auto;
			}

			#list {
				border: 1px solid rgb(200, 200, 200);
			}

			#list thead {
				background-color: rgb(75, 75, 75);
				position: sticky;
			}

			#list th, #list td {
				padding: 5px;
				padding-left: 10px;
				text-align: left;
			}

		</style>
	</head>
	<body>
		<div id="loading-screen">
			<div id="loading-spinner"></div>
			<p id="loading-text"></p>
		</div>

		<div id="main-content">
			<table id="list">
				<thead>
					<tr>
						<th>Index</th>
						<th>Icon</th>
						<th>Components</th>
					</tr>
				</thead>
			</table>
		</div>
		
		<script type="text/javascript">
			const loadingScreenElement = document.getElementById("loading-screen");
			const loadingTextElement = document.getElementById("loading-text");
			const mainContentElement = document.getElementById("main-content");
			
			let loadingText = "";
			let loadingTextDotCount = 0;
			
			function updateLoadingText() {
				loadingTextElement.innerHTML = loadingText + ".".repeat(loadingTextDotCount);
			}
			
			setInterval(function() {
				if (++loadingTextDotCount > 3) {
					loadingTextDotCount = 0;
				}
				
				updateLoadingText();
			}, 500);
			
			function setLoadingScreenText(text) {
				if (text) {
					loadingText = text;
					updateLoadingText();
					loadingScreenElement.style.display = "flex";
					mainContentElement.style.display = "none";
				} else {
					loadingScreenElement.style.display = "none";
					mainContentElement.style.display = "block";
				}
			}

			setLoadingScreenText("Loading library");
		</script>

		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/opentype.js@1.3.4/dist/opentype.min.js"></script>

		<script type="text/javascript">
			function sleepAsync(time) {
				return new Promise(function(resolve, reject) {
					setTimeout(resolve, time);
				});
			}
			
			async function fetchFontBuffer(url) {
				while (true) {
					try {
						return await (await fetch(url)).arrayBuffer();
					} finally {
						await sleepAsync(1000);
					}
				}
			}
			
			(async function() {
				setLoadingScreenText("Fetching font files");
				
				const baseURL = "https://raw.githubusercontent.com/MaximumADHD/Roblox-Client-Tracker/refs/heads/roblox/LuaPackages/Packages/_Index/BuilderIcons/BuilderIcons/Font/";
				const regularFontBuffer = await fetchFontBuffer(baseURL + "BuilderIcons-Regular.ttf");
				const filledFontBuffer = await fetchFontBuffer(baseURL + "BuilderIcons-Filled.ttf");
				
				setLoadingScreenText("Parsing font files");
				
				document.fonts.add(new FontFace("BuilderIcons", regularFontBuffer, {weight: "normal"}));
				document.fonts.add(new FontFace("BuilderIcons", filledFontBuffer, {weight: "bold"}));

				const regularFontData = opentype.parse(regularFontBuffer);
				const filledFontData = opentype.parse(filledFontBuffer);

				// do stuff

				setLoadingScreenText(null);
			})();
		</script>
	</body>
</html>